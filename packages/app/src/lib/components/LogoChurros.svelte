<script lang="ts">
  export let textColor = 'var(--header-text, var(--text))';
  export let wordmark = false;
  export let hollow = false;
  export let drawing = false;
  export let loopDrawingAnimation = false;

  let faceElement: SVGPathElement;
  $: facePathLength = faceElement?.getTotalLength();

  const dashRatio = loopDrawingAnimation ? 1 / 6 : 1;

  function dashArray(ratio: number, totalLength: number) {
    if (ratio === 1) return totalLength;
    return `${ratio * totalLength},${(1 - ratio) * totalLength}`;
  }
</script>

{#if hollow && !wordmark}
  <svg
    width="100%"
    viewBox="0 0 2345 2345"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    class:loop={loopDrawingAnimation}
  >
    <path
      class="main"
      d="M1545.72 1550.32C1545.77 1553.4 1545.8 1556.47 1545.81 1559.52M1545.72 1550.32C1545.22 1520.34 1542.95 1490.15 1539 1459.9M1545.72 1550.32L1545.81 1559.52M883.105 616.205C846.647 602.755 810.941 592.757 776.218 586.048M883.105 616.205C912.712 627.128 941.893 639.987 970.521 654.602M883.105 616.205L776.218 586.048M883.105 616.205L970.521 654.602M1316.86 1475.06C1316.74 1527.76 1307.96 1575.02 1291.93 1615.85M1316.86 1475.06L1441.9 1521.19M1316.86 1475.06L1291.93 1615.85M1235.49 1178.32C1183.68 1083.33 1110.42 997.842 1025.48 935.613M1235.49 1178.32L1417.3 1101.35M1235.49 1178.32L1752.49 852.318M1025.48 935.613L1091.6 729.025M1025.48 935.613L1542.48 609.613M1236.5 1705.08C1259.6 1680.34 1278.36 1650.4 1291.93 1615.85M1236.5 1705.08L1379.61 1865.73L1424.63 1916.27M1236.5 1705.08L1291.93 1615.85M677.157 575.648C709.091 576.056 742.183 579.472 776.218 586.048M677.157 575.648L731.403 751.734L745.242 796.654M677.157 575.648C677.157 575.648 756.048 525.902 806.598 494.028M677.157 575.648L776.218 586.048M677.157 575.648L806.598 494.028M1091.6 729.025C1066.43 710.816 1040.61 693.932 1014.23 678.523C1012.32 677.402 1010.4 676.29 1008.47 675.185C995.94 667.985 983.285 661.119 970.521 654.602M1091.6 729.025L1608.6 403.025M1545.81 1559.52L1564.67 1547.63L1781.73 1410.76M1545.81 1559.52L1441.9 1521.19M1417.3 1101.35L1767.2 880.718L1934.3 775.352M1417.3 1101.35C1461.07 1180.56 1495.17 1264.14 1517.21 1348.73C1526.85 1385.69 1534.18 1422.84 1539 1459.9M1424.63 1916.27C1344.73 2003.6 1230.32 2049.83 1096.65 2044.14L1022.48 1785.92C984.65 1783.96 944.484 1775.62 902.793 1760.31M1424.63 1916.27L1941.63 1590.27L1781.73 1410.76M367.214 1510.27C447.972 1659.39 563.009 1793.52 696.51 1890.39M367.214 1510.27L550.859 1436.59C545.217 1426.04 539.839 1415.39 534.738 1404.63M367.214 1510.27L534.738 1404.63M696.51 1890.39L763.02 1684.08C806.712 1716.18 853.507 1742.13 902.072 1760.05C902.312 1760.14 902.553 1760.23 902.793 1760.31M696.51 1890.39L902.793 1760.31M355.099 714.713L546.645 921.882C579.069 884.607 620.815 858.215 669.27 844.559M355.099 714.713C284.206 798.05 243.018 915.767 243.405 1059.45L472.362 1144.35C472.348 1147.66 472.369 1151 472.425 1154.36C473.81 1237.85 496.445 1323.9 534.738 1404.63M355.099 714.713L872.099 388.713L909.486 429.15M1752.49 852.318C1700.68 757.332 1627.42 671.842 1542.48 609.613M1752.49 852.318L1934.3 775.352M1542.48 609.613L1608.6 403.025M1539.48 1459.92C1539.32 1459.91 1539.16 1459.9 1539 1459.9M1608.6 403.025C1542.92 355.514 1472.8 317.024 1400.1 290.205C1327.91 263.572 1258.67 250.473 1194.16 249.648L909.486 429.15M1934.3 775.352C2012.8 917.414 2060.22 1073.57 2062.72 1224.32C2062.77 1227.4 2062.8 1230.47 2062.81 1233.52L1781.73 1410.76M1291.93 1615.85L1441.9 1521.19M909.486 429.15C909.486 429.15 846.778 468.691 806.598 494.028M745.242 796.654L756.724 833.928C725.768 833.243 696.462 836.895 669.27 844.559M745.242 796.654L669.27 844.559"
      stroke="var(--fg)"
      stroke-width="var(--logo-stroke-width)"
    />
    <path
      class="face-masker"
      class:drawing
      d="M902.072 1760.05C853.507 1742.13 806.712 1716.18 763.02 1684.08L696.51 1890.39C563.009 1793.52 447.972 1659.39 367.214 1510.27L550.859 1436.59C545.217 1426.04 539.839 1415.39 534.738 1404.63C496.445 1323.9 473.81 1237.85 472.425 1154.36C472.369 1151 472.348 1147.66 472.362 1144.35L243.405 1059.45C243.018 915.767 284.206 798.05 355.099 714.713L546.645 921.882C579.069 884.607 620.815 858.215 669.27 844.559C696.462 836.895 725.768 833.243 756.724 833.928L677.157 575.648C709.091 576.056 742.183 579.472 776.218 586.048L883.105 616.205C912.712 627.128 941.893 639.987 970.521 654.602C983.285 661.119 995.94 667.985 1008.47 675.185C1010.4 676.29 1012.32 677.402 1014.23 678.523C1040.61 693.932 1066.43 710.816 1091.6 729.025L1025.48 935.613C1110.42 997.842 1183.68 1083.33 1235.49 1178.32L1417.3 1101.35C1461.07 1180.56 1495.17 1264.14 1517.21 1348.73C1526.85 1385.69 1534.18 1422.84 1539 1459.9C1542.95 1490.15 1545.22 1520.34 1545.72 1550.32L1545.81 1559.52L1316.86 1475.06C1316.74 1527.76 1307.96 1575.02 1291.93 1615.85C1278.36 1650.4 1259.6 1680.34 1236.5 1705.08L1424.63 1916.27C1344.73 2003.6 1230.32 2049.83 1096.65 2044.14L1022.48 1785.92C984.65 1783.96 944.484 1775.62 902.793 1760.31"
      stroke="var(--bg3)"
      stroke-width="calc( 2* var(--logo-stroke-width))"
    />
    <path
      bind:this={faceElement}
      class="face"
      class:drawing
      d="M902.072 1760.05C853.507 1742.13 806.712 1716.18 763.02 1684.08L696.51 1890.39C563.009 1793.52 447.972 1659.39 367.214 1510.27L550.859 1436.59C545.217 1426.04 539.839 1415.39 534.738 1404.63C496.445 1323.9 473.81 1237.85 472.425 1154.36C472.369 1151 472.348 1147.66 472.362 1144.35L243.405 1059.45C243.018 915.767 284.206 798.05 355.099 714.713L546.645 921.882C579.069 884.607 620.815 858.215 669.27 844.559C696.462 836.895 725.768 833.243 756.724 833.928L677.157 575.648C709.091 576.056 742.183 579.472 776.218 586.048L883.105 616.205C912.712 627.128 941.893 639.987 970.521 654.602C983.285 661.119 995.94 667.985 1008.47 675.185C1010.4 676.29 1012.32 677.402 1014.23 678.523C1040.61 693.932 1066.43 710.816 1091.6 729.025L1025.48 935.613C1110.42 997.842 1183.68 1083.33 1235.49 1178.32L1417.3 1101.35C1461.07 1180.56 1495.17 1264.14 1517.21 1348.73C1526.85 1385.69 1534.18 1422.84 1539 1459.9C1542.95 1490.15 1545.22 1520.34 1545.72 1550.32L1545.81 1559.52L1316.86 1475.06C1316.74 1527.76 1307.96 1575.02 1291.93 1615.85C1278.36 1650.4 1259.6 1680.34 1236.5 1705.08L1424.63 1916.27C1344.73 2003.6 1230.32 2049.83 1096.65 2044.14L1022.48 1785.92C984.65 1783.96 944.484 1775.62 902.793 1760.31"
      stroke="var(--primary)"
      stroke-width="calc( 2* var(--logo-stroke-width))"
      stroke-dasharray={dashArray(dashRatio, facePathLength)}
      stroke-dashoffset={facePathLength}
    />
    <path
      class="hole"
      d="M712 1242.19L879.177 1125.67L1046.35 1365.54L879.177 1482.06L712 1242.19Z"
      stroke="var(--fg)"
      stroke-width="var(--logo-stroke-width)"
    />
  </svg>
{:else}
  <svg
    height="100%"
    viewBox="0 0 {wordmark ? '3283' : '900'} 900"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_31_30)">
      <path
        d="M448.755 712.249L0 634.015V783.962L448.755 862.196V712.249Z"
        fill="var(--logo-shadows-fill)"
        stroke-width="var(--logo-stroke-width)"
        stroke="var(--logo-shadows-stroke)"
      />
      <path
        d="M872.517 610.111L449.84 713.335V861.109L872.517 742.129V610.111Z"
        fill="var(--logo-highlight-fill)"
        stroke-width="var(--logo-stroke-width)"
        stroke="var(--logo-highlight-stroke)"
      />
      <path
        d="M449.295 712.249L2.16992 632.929L449.295 553.066L879.578 607.394L449.295 712.249Z"
        fill="var(--logo-base-fill)"
        stroke-width="var(--logo-stroke-width)"
        stroke="var(--logo-base-stroke)"
      />
      <path
        d="M278.747 115.445L274.181 75.2623L594.897 7.40822V45.839L278.747 115.445Z"
        fill="var(--logo-base-fill)"
        stroke="var(--logo-base-stroke)"
        stroke-width="var(--logo-stroke-width)"
      />
      <path
        d="M275.169 115.81L275.589 123.305C295.481 125.417 343.399 138.746 374.716 174.719L374.741 174.698C375.271 175.194 376.043 175.696 376.382 175.83L389.605 180.237L384.464 174.332C385.382 174.105 386.404 173.855 387.524 173.582C393.487 172.128 402.198 170.042 413.019 167.461C418.201 166.225 423.866 164.875 429.942 163.428C449.233 158.832 472.673 153.249 497.983 147.166C564.532 131.173 644.1 111.709 695.327 97.656L699.502 96.5106L697.828 92.5178C696.345 88.9818 692.878 84.5681 688.063 79.9979C683.157 75.3408 676.57 70.2547 668.479 65.4319C652.36 55.8235 630.136 47.1792 603.124 45.1284C603.101 45.1245 603.082 45.1214 603.066 45.1188C602.669 45.0554 602.335 45.0658 602.226 45.0693C601.933 45.0786 601.629 45.1132 601.396 45.1429C600.889 45.2077 600.199 45.3192 599.376 45.4638C597.71 45.7564 595.284 46.2223 592.195 46.8388C586.008 48.0738 577.063 49.9336 566.005 52.2735C543.886 56.9544 513.267 63.5674 479.253 70.9723C411.223 85.7827 329.59 103.766 275.169 115.81Z"
        fill="var(--logo-highlight-fill)"
        stroke="var(--logo-highlight-stroke)"
        stroke-width="var(--logo-stroke-width)"
      />
      <path
        d="M726.373 60.3047L392.795 128.215C434.519 156.032 467.406 235.424 478.634 271.643L805.149 199.386C797.326 144.623 749.372 83.8471 726.373 60.3047Z"
        fill="var(--logo-highlight-fill)"
        stroke="var(--logo-highlight-stroke)"
        stroke-width="var(--logo-stroke-width)"
        stroke-linejoin="bevel"
      />
      <path
        d="M447.401 282.053L443.481 282.907L444.544 286.776C460.02 343.094 457.795 402.789 454.764 425.432L454.047 430.79L459.332 429.655C514.114 417.883 596.315 400.199 664.875 385.403C699.154 378.005 730.025 371.329 752.354 366.475C763.518 364.049 772.55 362.076 778.806 360.697C781.933 360.008 784.373 359.465 786.04 359.087C786.872 358.899 787.523 358.749 787.975 358.641C788.09 358.614 788.197 358.588 788.295 358.564C788.388 358.541 788.472 358.519 788.547 358.5C788.617 358.482 788.716 358.455 788.817 358.425C788.861 358.411 788.961 358.381 789.081 358.336C789.146 358.311 789.306 358.244 789.403 358.199C789.577 358.11 790.116 357.756 790.454 357.455L791.38 356.53L791.54 355.231C799.015 294.55 785.888 235.503 778.325 213.369L777.229 210.16L773.916 210.882L447.401 282.053Z"
        fill="var(--logo-highlight-fill)"
        stroke="var(--logo-highlight-stroke)"
        stroke-width="var(--logo-stroke-width)"
      />
      <path
        d="M311.867 623.545L312.31 627.775L316.464 626.864L648.412 554.064L651.742 553.334L651.379 549.944L646.489 504.308L646.039 500.103L641.905 500.996L309.957 572.71L306.622 573.43L306.977 576.823L311.867 623.545Z"
        fill="var(--logo-highlight-fill)"
        stroke="var(--logo-highlight-stroke)"
        stroke-width="var(--logo-stroke-width)"
      />
      <path
        d="M819.275 371.608L493.846 444.408C483.415 518.73 448.573 563.388 432.455 576.427C540.026 553.066 756.037 506.56 759.514 507.43C796.457 483.96 814.748 407.103 819.275 371.608Z"
        fill="var(--logo-highlight-fill)"
        stroke="var(--logo-highlight-stroke)"
        stroke-width="var(--logo-stroke-width)"
        stroke-linejoin="bevel"
      />
      <path
        d="M95.0762 252.085L130.39 266.21C130.39 261.864 134.555 244.117 136.366 238.503L95.0762 252.085Z"
        fill="var(--logo-highlight-fill)"
      />
      <path
        d="M492.758 443.865L458.531 427.023L787.763 354.766L819.273 371.608L492.758 443.865Z"
        fill="var(--logo-base-fill)"
      />
      <path
        d="M130.387 266.754C135.82 237.235 154.509 174.612 185.802 160.269C184.933 159.4 166.606 132.381 157.551 118.98C173.669 100.689 218.834 65.7376 270.555 72.257C270.12 71.3878 273.634 103.043 275.444 118.98C297.898 122.058 349.757 137.014 377.575 172.212C377.839 171.196 388.081 143.128 393.338 128.759C418.329 141.254 460.053 200.473 479.177 272.187C478.308 271.317 457.808 280.517 447.666 285.225C454.548 308.949 466.247 370.63 457.989 427.566C458.858 425.393 481.169 437.165 492.216 443.322C487.688 477.549 469.289 551.87 431.911 575.34L406.376 537.854C396.597 550.349 364.109 575.34 312.388 575.34C311.953 575.34 314.742 607.938 316.191 624.236C284.68 621.701 215.792 606.416 192.322 565.561C191.887 565.127 205.179 539.665 211.88 526.988C192.684 506.162 151.901 453.753 142.339 410.725C142.774 409.855 121.513 419.417 110.829 424.307C98.152 394.245 77.5795 317.931 96.7032 253.171C96.2686 252.302 118.978 261.864 130.387 266.754Z"
        fill="var(--logo-shadows-fill)"
      />
      <path
        d="M377.582 172.222C349.766 137.017 297.9 122.058 275.444 118.98C273.634 103.043 270.12 71.3878 270.555 72.257C218.834 65.7376 173.669 100.689 157.551 118.98C166.606 132.381 184.933 159.4 185.802 160.269C154.509 174.612 135.82 237.235 130.387 266.754C118.978 261.864 96.2686 252.302 96.7032 253.171C77.5795 317.931 98.152 394.245 110.829 424.307C121.513 419.417 142.774 409.855 142.339 410.725C151.901 453.753 192.684 506.162 211.88 526.988C205.179 539.665 191.887 565.127 192.322 565.561C215.792 606.416 284.68 621.701 316.191 624.236C314.742 607.938 311.953 575.34 312.388 575.34C364.109 575.34 396.597 550.349 406.377 537.854L431.911 575.34C469.289 551.87 487.688 477.549 492.216 443.322C481.169 437.165 458.858 425.393 457.989 427.566C466.247 370.63 454.548 308.949 447.666 285.225C457.808 280.517 478.308 271.317 479.177 272.187C460.053 200.473 418.329 141.254 393.338 128.759M377.582 172.222C377.148 173.091 387.905 143.609 393.338 128.759M377.582 172.222L393.338 128.759"
        stroke="var(--logo-shadows-stroke)"
        stroke-width="var(--logo-stroke-width)"
      />
      <path
        d="M222.573 294.676L219.283 295.83L220.148 299.208L253.832 430.683L254.811 434.507L258.595 433.386L355.844 404.592L359.44 403.527L358.425 399.916L320.395 264.638L319.298 260.737L315.475 262.078L222.573 294.676Z"
        fill="var(--logo-base-fill)"
        stroke="var(--logo-base-stroke)"
        stroke-width="var(--logo-stroke-width)"
      />
      <path
        d="M775.813 214.598L448.211 284.682L479.178 271.1L805.693 199.929L775.813 214.598Z"
        fill="var(--logo-base-fill)"
        stroke="var(--logo-base-stroke)"
        stroke-width="var(--logo-stroke-width)"
        stroke-linejoin="bevel"
      />
      <path
        d="M575.884 0L260.777 70.084L272.186 72.2571L599.245 2.71643L575.884 0Z"
        fill="var(--logo-highlight-fill)"
        stroke="var(--logo-highlight-stroke)"
        stroke-width="5.43287"
      />
      {#if wordmark}
        <path
          d="M1462.53 231.898C1417.82 190.688 1358.11 165.518 1292.51 165.518C1153.92 165.518 1041.58 277.863 1041.58 416.449C1041.58 555.034 1153.92 667.379 1292.51 667.379C1360.79 667.379 1422.71 640.104 1467.95 595.852"
          stroke={textColor}
          stroke-width="72"
        />
        <path
          d="M1551.16 162V694.349V532.533C1551.16 458.06 1610.87 397.687 1684.51 397.687C1758.16 397.687 1817.86 458.06 1817.86 532.533V694.349"
          stroke={textColor}
          stroke-width="72"
        />
        <path
          d="M2181.27 370L2181.27 531.815C2181.27 606.289 2120.9 666.661 2046.42 666.661C1971.95 666.661 1911.58 606.288 1911.58 531.815L1911.58 370"
          stroke={textColor}
          stroke-width="72"
        />
        <circle cx="2828.08" cy="544.5" r="142.5" stroke={textColor} stroke-width="72" />
        <path d="M2282.58 701V408H2435.58" stroke={textColor} stroke-width="72" />
        <path d="M2498.58 701V408H2655.58" stroke={textColor} stroke-width="72" />
        <path
          d="M3242.58 479.5C3230.08 448 3190.98 414.5 3146.58 414.5C3113.58 414.5 3058.88 433.9 3066.08 489.5C3067.37 499.5 3073.58 539.861 3146.58 550C3154.08 551.042 3248.08 566.5 3237.08 635C3237.08 635 3226.08 695.5 3146.58 693.5C3122.91 694 3069.68 680.5 3046.08 622.5"
          stroke={textColor}
          stroke-width="72"
        />
      {/if}
    </g>
    <defs>
      <clipPath id="clip0_31_30">
        <rect width="3283" height="861" fill="white" />
      </clipPath>
    </defs>
  </svg>
{/if}

<style>
  path.face-masker {
    stroke: var(--fg);
    stroke-width: var(--logo-stroke-width);
    transition: all 500ms ease;
  }

  @media (prefers-reduced-motion: no-preference) {
    path.face.drawing {
      animation: draw 700ms ease forwards;
    }

    .loop path.face.drawing {
      animation: draw 1s infinite linear;
    }

    path.face-masker.drawing {
      stroke: var(--bg3);
      stroke-width: calc(var(--logo-stroke-width) * 2);
    }

    @keyframes draw {
      to {
        stroke-dashoffset: 0;
      }
    }
  }

  @media (prefers-reduced-motion: reduce) {
    path.face-masker {
      animation: pulse 350ms infinite alternate ease;
    }

    @keyframes pulse {
      to {
        stroke: var(--primary);
      }
    }
  }
</style>
